<form [formGroup]="sacramentForm" *ngIf="sacramentForm">
  <ng-container
    formArrayName="sacrament_details"
    *ngFor="let sacrament of sacramentFormArray.controls; let i = index"
  >
    <div [formGroupName]="i">
      <app-accordion
        [title]="getSacramentTypeName(i)"
        (remove)="removeSacrament(getSacramentId(i), i)"
      >
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-4">
          <div class="form-group">
            <label>Type</label>
            <select
              id="type"
              formControlName="type"
              [ngClass]="{ invalid: isInvalid('type', i) }"
            >
              <option value="">Select Type</option>
              <option *ngFor="let type of sacramentTypes" [value]="type.id">
                {{ type.name }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label>Date</label>
            <input
              type="date"
              formControlName="date"
              [ngClass]="{ invalid: isInvalid('date', i) }"
            />
          </div>
          <div class="form-group">
            <label>Parish</label>
            <input
              type="text"
              formControlName="parish"
              [ngClass]="{ invalid: isInvalid('parish', i) }"
            />
          </div>
          <div class="form-group">
            <label>Priest</label>
            <input type="text" formControlName="priest" />
          </div>

          <!-- <div class="form-group" *ngIf="sacrament.get('type')?.value === 'baptism'">
            <label>God Father</label>
            <input
              type="text"
              formControlName="god_father"
            />
          </div>
          <div class="form-group" *ngIf="sacrament.get('type')?.value === 'baptism'">
            <label>God Mother</label>
            <input
              type="text"
              formControlName="god_mother"
             
            />
          </div>
          <div class="form-group" *ngIf="sacrament.get('type')?.value === 'matrimony'">
            <label>Spouse</label>
            <input type="text" formControlName="spouse" />
          </div> -->

          <!-- Place section -->
          <app-section-form [title]="'Place'" class="md:col-span-3">
            <div class="form-section-3" formGroupName="place">
              <!-- City -->
              <div class="form-group">
                <label>City</label>
                <input type="text" formControlName="city" />
              </div>
              <!-- State -->
              <div class="form-group">
                <label>State</label>
                <input type="text" formControlName="state" />
              </div>
              <!-- Country -->
              <div class="form-group">
                <label>Country</label>
                <input type="text" formControlName="country" />
              </div>
            </div>
          </app-section-form>
        </div>

        <!-- Action section -->
        <footer
          class="side-tab-footer w-full mt-4 p-2 flex justify-end items-center border-t-gray-200 border-t-2"
          *appCanEdit="screen"
        >
          <ng-container *ngIf="sacramentFormArray.length > i">
            <button class="mr-2" (click)="save(getSacramentId(i), i)">
              <fa-icon [icon]="faFloppyDisk"></fa-icon> Save
            </button>
          </ng-container>
        </footer>
      </app-accordion>
    </div>
  </ng-container>
</form>
<span *appCanCreate="screen">
  <button
    class="accordion-btn border-1 border-primary-color hover:border-none justify-center"
    (click)="addSacrament()"
  >
    <fa-icon [icon]="faPlus"></fa-icon> Add Sacrament
  </button>
</span>
